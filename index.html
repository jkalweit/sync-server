<html>

<body>
Test from file changed 3!

<p id="text">This should change.</p>
<input id="msg" />
<button onclick="sendMessage()">Send Message</button>
<button onclick="closeSocket()">Close Socket</button>
<p>Received:</p>
<ul id="received">
</ul>

</body>
<script>
	document.getElementById('text').innerHTML = 'Changed!';
	var received = document.getElementById('received');
	

	function addMsg(msg) {
		var el = document.createElement('li');
		el.innerHTML = msg;
		received.appendChild(el);
	}

	function sendMessage() {
		var message = document.getElementById('msg').value;
		addMsg('Sending: ' + message);
		socket.send(message);
	}

	function closeSocket() {
		socket.close();
	}

	var socket = new WebSocket('ws://' + window.location.host + '/data');
	socket.onopen = function (event) {
		addMsg('Opened socket');
	}
	socket.onclose = function (event) {
		addMsg('Closed socket');
	}
	socket.onerror = function (event) {
		addMsg('Socket ERROR');
		console.log('Socket error: ', event);
	}
	socket.onmessage = function (event) {
		addMsg('Received message: ' + event.data);
		console.log('socket rcvd:', event);
	};
	console.log('socket', socket);

</script>

</html>
